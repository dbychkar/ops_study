# 1. Введение в systemd

## Что такое systemd и зачем он нужен?

systemd — это система инициализации и менеджер служб, которая используется в большинстве современных дистрибутивов Linux (например, Ubuntu, Fedora, Debian, Arch Linux и других). Она была разработана как замена традиционной системы инициализации SysVinit и других альтернатив, таких как Upstart.

### Основные задачи systemd:

    Инициализация системы: systemd отвечает за запуск всех процессов и служб при загрузке системы. Она управляет порядком запуска, зависимостями между службами и параллелизацией процессов.

    Управление службами: systemd позволяет управлять службами (например, запускать, останавливать, перезапускать, включать автозапуск).

    Мониторинг и логирование: systemd интегрирован с журналированием через journald, что позволяет собирать и анализировать логи системы и служб.

    Автоматизация задач: systemd поддерживает таймеры, которые могут использоваться для выполнения задач по расписанию (аналог cron).

    Управление ресурсами: systemd предоставляет механизмы для контроля ресурсов (например, CPU, память, дисковое пространство) для служб и процессов.

### Основные компоненты systemd

    Юниты (Units):

        Это базовые объекты, которыми управляет systemd. Юниты представляют собой конфигурационные файлы, которые описывают, как systemd должен управлять определёнными ресурсами или задачами.

        Типы юнитов:

            Service — управление службами (например, веб-сервер, база данных).

            Timer — выполнение задач по расписанию.

            Socket — активация служб по запросу через сокеты.

            Mount — управление точками монтирования файловых систем.

            Target — группы юнитов, которые используются для организации загрузки системы (аналогично уровням запуска в SysVinit).

    Journald:

        Это компонент systemd, отвечающий за сбор и хранение логов. Логи могут быть системными, служб или ядра.

        Логи хранятся в бинарном формате, что позволяет эффективно их фильтровать и анализировать с помощью утилиты journalctl.

    Таймеры (Timers):

        Аналог cron, но с более гибкими возможностями. Таймеры могут запускать задачи по расписанию или через определённые интервалы времени.

    Сокеты (Sockets):

        Позволяют активировать службы по запросу (например, когда происходит подключение к определённому порту).

    Цели (Targets):

        Группы юнитов, которые используются для организации загрузки системы. Например, multi-user.target — многопользовательский режим без графического интерфейса, graphical.target — режим с графическим интерфейсом.

### Преимущества systemd

    Параллельный запуск служб:

        systemd запускает службы параллельно, если они не зависят друг от друга, что ускоряет загрузку системы.

    Зависимости между службами:

        systemd автоматически управляет зависимостями между службами, что упрощает настройку и предотвращает ошибки.

    Единый интерфейс управления:

        Все службы и задачи управляются через одну утилиту — systemctl.

    Журналирование:

        Интеграция с journald позволяет централизованно собирать и анализировать логи.

    Гибкость:

        systemd поддерживает множество типов юнитов, что делает его универсальным инструментом для управления системой.

    Автоматизация:

        Таймеры и сокеты позволяют автоматизировать задачи и активировать службы по запросу.

### Недостатки systemd

    Сложность:

        systemd имеет множество функций и настроек, что может быть сложным для новичков.

    Монолитность:

        systemd объединяет множество функций (инициализация, управление службами, журналирование и т.д.), что некоторые считают нарушением принципа "одна программа — одна задача".

    Критика со стороны сообщества:

        Некоторые пользователи и разработчики критикуют systemd за излишнюю сложность и недостаточную прозрачность.



пример юнит файла (расширение .ini)

[Unit]
Description=My Custom Script
After=network.target

[Service]
ExecStart=/usr/local/bin/my-script.sh

[Install]
WantedBy=multi-user.target